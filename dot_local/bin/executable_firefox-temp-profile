#!/usr/bin/env bash

set -o pipefail

profile="$(mktemp -d -t "firefox.XXXXXXXXXX")"

FIREFOX_DEFAULT_PROFILE="j56dvo43.default-1520714705340"

case "$1" in
    "default")
        rsync --archive "${HOME}/.mozilla/firefox/${FIREFOX_DEFAULT_PROFILE}/" "${profile}/"
        ;;
esac

trap 'rm -rf "$profile"' EXIT

firefox --new-instance --profile "$profile" "$@"
