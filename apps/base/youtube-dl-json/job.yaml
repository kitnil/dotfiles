apiVersion: batch/v1
kind: Job
metadata:
  name: youtube-dl
spec:
  template:
    spec:
      containers:
      - name: youtube-dl
        image: nixery.dev/youtube-dl
        command: ["/bin/youtube-dl"]
        args:
        - --write-info-json
        - --skip-download
        - --ignore-errors
        - 'https://www.youtube.com/playlist?list=PLmjgicsUWIkvEKkLN01vm85neXAik3yU2'
        workingDir: /workdir
        volumeMounts:
        - mountPath: /workdir
          name: data
        resources:
          limits:
            cpu: 2000m
            memory: 2048Mi
          requests:
            cpu: 10m
            memory: 128Mi
      volumes:
      - name: data
        hostPath:
          path: /home/oleg/src/music
          type: Directory
      restartPolicy: Never
  backoffLimit: 0
