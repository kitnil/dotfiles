;;; .emacs --- Oleg's Emacs configuration
;; Copyright Â© 2017, 2018, 2019, 2020 Oleg Pykhalov <go.wigust@gmail.com>
;; Released under the GNU GPLv3 or any later version.

;; Tip: "M-x e" on `(emacs-init-time)'.

;; Prettify without breaking indentation,
;; Origin <http://endlessparentheses.com/using-prettify-symbols-in-clojure-and-elisp-without-breaking-indentation.html>.

;; Prevent stale elisp bytecode from shadowing more up-to-date source
;; files.  Origin <https://github.com/technomancy/better-defaults>.

;; Added by Package.el.  This must come before configurations of
;; installed packages.  Don't delete this line.  If you don't want it,
;; just comment it out by adding a semicolon to the start of the line.
;; You may delete these explanatory comments.
;; (package-initialize)

(autoload 'f-directories "f" nil t)
(autoload 'string-trim-right "subr-x" nil t)
(autoload 'flet "cl" nil t)
(autoload 'beginend-global-mode "beginend" nil t)
(require 'dash) ; TODO: Use `autoload' instead of `require'.
(require 'cl-lib)

(defun load-config-file (file)
  (load (concat (getenv "HOME") "/.emacs.d/modules/" file)))

(setq load-prefer-newer t)

(setq epg-gpg-program "gpg")

;; (require 'benchmark-init)

;; To disable collection of benchmark data after init is done.
;; (add-hook 'after-init-hook 'benchmark-init/deactivate)

(setq package-archives nil) ; Makes unpure packages archives unavailable

(setq user-mail-address "go.wigust@gmail.com")
(setq user-full-name "Oleg Pykhalov")
(setq default-input-method "russian-computer") ; <C-\> keyboard layout

;; EMACSCLIENT(1)
(autoload 'server-running-p "server")
(unless (server-running-p) (server-start))

(autoload 'debbugs-browse-url "debbugs-browse" nil t)

(load-config-file "dashboard.el")
(load-config-file "term.el")
(load-config-file "audio.el")
(load-config-file "ffap.el")
(load-config-file "keys.el")
(load-config-file "files.el")
(load-config-file "mail.el")
(load-config-file "utils.el")
(load-config-file "lisp.el")
(load-config-file "nix.el")
(load-config-file "scheme.el")
(load-config-file "c.el")
(load-config-file "version-control.el")
(load-config-file "erc.el")
(load-config-file "guix.el")
(load-config-file "org.el")
(load-config-file "rfc.el")
(load-config-file "web.el")
(load-config-file "outline.el")
(load-config-file "snippets.el")
(load-config-file "copyright.el")
(load-config-file "lsp.el")
(load-config-file "theme.el")
(load-config-file "slack.el")
(load-config-file "ci.el")
(load-config-file "compile.el")
(load-config-file "hooks.el")
(load-config-file "debug.el")
(load-config-file "elfeed.el")
(load-config-file "time.el")
(load-config-file "nav.el")
(load-config-file "debbugs.el")
(load-config-file "text.el")
(load-config-file "haskell.el")
(load-config-file "completion.el")
(load-config-file "ftp.el")
(load-config-file "info.el")
(load-config-file "majordomo.el")

;; (load-config-file "twitch.el")
;; (load-config-file "youtube.el")

(setq ewmctrl-wmctrl-path "/run/current-system/profile/bin/wmctrl")
(defalias 'rg 'deadgrep)

;; TODO: debpaste API broken
;; (setq debpaste-user-name "wigust")

(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(build-farm-build-arguments '("jobset=guix-master" "system=x86_64-linux"))
 '(company-backends
   '(company-lsp company-abbrev company-bbdb company-eclim company-semantic company-xcode company-cmake company-capf company-files
                 (company-dabbrev-code company-gtags company-etags company-keywords)
                 company-oddmuse company-dabbrev))
 '(custom-safe-themes
   '("3c83b3676d796422704082049fc38b6966bcad960f896669dfc21a7a37a748fa" "a27c00821ccfd5a78b01e4f35dc056706dd9ede09a8b90c6955ae6a390eb1c1e" default))
 '(debug-on-error nil)
 '(indent-tabs-mode nil)
 '(org-agenda-files '("~/org/inbox.org" "~/org/todo.org" "~/org/web.org"))
 '(safe-local-variable-values
   '((git-auto-commit-mode . t)
     (eval progn
           (put 'with-directory 'scheme-indent-function 1)
           (put 'with-repository 'scheme-indent-function 2))
     (TeX-master . "guile.texi")
     (eval c-set-offset 'access-label '-)
     (eval c-set-offset 'substatement-open 0)
     (eval c-set-offset 'arglist-cont-nonempty '+)
     (eval c-set-offset 'arglist-cont 0)
     (eval c-set-offset 'arglist-intro '+)
     (eval c-set-offset 'inline-open 0)
     (eval c-set-offset 'defun-open 0)
     (eval c-set-offset 'innamespace 0)
     (indicate-empty-lines . t)
     (eval modify-syntax-entry 43 "'")
     (eval modify-syntax-entry 36 "'")
     (eval modify-syntax-entry 126 "'")
     (bug-reference-bug-regexp . "<https?://\\(debbugs\\|bugs\\)\\.gnu\\.org/\\([0-9]+\\)>")))
 '(tramp-default-method "ssh"))

(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(ediff-even-diff-B ((t (:background "gray35"))))
 '(ediff-odd-diff-A ((t (:background "gray35"))))
 '(ediff-odd-diff-B ((t (:background "gray35"))))
 '(fringe ((t nil)))
 '(highlight-indent-guides-character-face ((t (:foreground "gainsboro"))))
 '(highlight-indent-guides-even-face ((t (:background "white smoke"))))
 '(irfc-head-name-face ((t (:inherit font-lock-function-name-face))))
 '(irfc-head-number-face ((t (:inherit font-lock-function-name-face))))
 '(irfc-reference-face ((t (:foreground "dim gray" :weight bold))))
 '(irfc-requirement-keyword-face ((t (:inherit font-lock-keyword-face))))
 '(irfc-rfc-link-face ((t (:inherit link))))
 '(irfc-table-item-face ((t (:foreground "SpringGreen4"))))
 '(lsp-ui-sideline-code-action ((t (:foreground "saddle brown"))))
 '(lsp-ui-sideline-current-symbol ((t (:foreground "black" :box (:line-width -1 :color "black") :weight ultra-bold :height 0.99))))
 '(lsp-ui-sideline-symbol ((t (:foreground "dim grey" :box (:line-width -1 :color "dim gray") :height 0.99))))
 '(magit-diff-added ((t (:foreground "#22aa22"))))
 '(magit-diff-added-highlight ((t (:foreground "#22aa22"))))
 '(magit-diff-context-highlight ((t (:foreground "grey50"))))
 '(magit-diff-removed ((t (:foreground "#aa2222"))))
 '(magit-diff-removed-highlight ((t (:foreground "#aa2222"))))
 '(markdown-code-face ((t (:inherit fixed-pitch))))
 '(rainbow-delimiters-depth-2-face ((t (:foreground "deep sky blue"))))
 '(rainbow-delimiters-depth-3-face ((t (:foreground "goldenrod"))))
 '(rainbow-delimiters-depth-4-face ((t (:foreground "lime green"))))
 '(rainbow-delimiters-depth-5-face ((t (:foreground "orange"))))
 '(rainbow-delimiters-depth-6-face ((t (:foreground "purple"))))
 '(rainbow-delimiters-depth-8-face ((t (:foreground "deep sky blue"))))
 '(rainbow-delimiters-depth-9-face ((t (:foreground "goldenrod"))))
 '(rainbow-delimiters-unmatched-face ((t (:foreground "red"))))
 '(sh-heredoc ((t (:foreground "tan3"))))
 '(term-color-blue ((t (:background "#4169e1" :foreground "#4169e1"))))
 '(term-color-cyan ((t (:background "#18B2B2" :foreground "#18B2B2"))))
 '(term-color-green ((t (:background "#66CD00" :foreground "#66CD00"))))
 '(term-color-magenta ((t (:background "#B218B2" :foreground "#B218B2"))))
 '(term-color-red ((t (:background "#B21818" :foreground "#B21818"))))
 '(term-color-white ((t (:background "#B2B2B2" :foreground "#B2B2B2"))))
 '(term-color-yellow ((t (:background "#B26818" :foreground "#B26818")))))
(put 'list-timers 'disabled nil)

(wi-toggle-theme)
(setq auto-mode-alist (delete (assoc "\\.drv" auto-mode-alist) auto-mode-alist))

;;; .emacs ends here
